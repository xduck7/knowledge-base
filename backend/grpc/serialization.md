# Сериализация в бэкенд‑системах

## Что такое сериализация

Сериализация — процесс преобразования структур данных или объектов в формат, который можно передать по сети или сохранить на диск. Десериализация — обратное преобразование.

Сериализация необходима в распределённых системах, где данные перемещаются между сервисами, написанными на разных языках или работающими в разных средах.

## Цели сериализации

* Передача данных между сервисами.
* Хранение состояния или структур в долговременных хранилищах.
* Инкапсуляция схемы данных.
* Обеспечение совместимости между версиями и языками.

## Требования к формату сериализации

* Компактность: минимальный объём передаваемых данных.
* Скорость: быстрое кодирование и декодирование.
* Строгость: наличие схемы или чёткой структуры.
* Совместимость: возможность использовать формат в разных языках.
* Эволюционность: удобная миграция при изменении структуры.

## Популярные форматы сериализации

### JSON

Текстовый формат с простой структурой. Удобен для человекочитаемости, широко используется во внешних API.

Плюсы:

* Простота.
* Универсальность.
* Отличная поддержка инструментами.

Минусы:

* Большой размер сообщений.
* Медленнее бинарных форматов.
* Нет встроенной схемы.

### XML

Текстовый формат с более строгой структурой. Исторически популярен в корпоративных системах.

Плюсы:

* Валидируемая схема.
* Расширяемость.

Минусы:

* Многословность.
* Замедляет передачу.

### YAML

Формат с углом на человекочитаемость. Часто используется в конфигурациях, но не оптимален для передачи между сервисами.

Плюсы:

* Удобен для конфигов.

Минусы:

* Хрупкий.
* Дорогой разбор.

### Protocol Buffers (Protobuf)

Бинарный формат сериализации, разработанный Google. Используется по умолчанию в gRPC.

Плюсы:

* Компактность.
* Быстрая сериализация.
* Строгая схема `.proto`.
* Сильная кросс-языковая совместимость.

Минусы:

* Не человекочитаем.
* Требуется генерация кода.

### Avro

Бинарный формат от Apache. Использует схему, передаваемую вместе с данными, что делает его удобным для систем с эволюцией контрактов.

Плюсы:

* Гибкая эволюция схем.
* Хорош для потоковых систем.

Минусы:

* Менее компактен, чем Protobuf.

### MessagePack

Бинарный формат, совместимый по модели данных с JSON, но компактнее и быстрее.

Плюсы:

* Быстрее JSON.
* Меньше размер.

Минусы:

* Нет строгой схемы.

## Сравнение текстовых и бинарных форматов

Текстовые форматы удобны при разработке, но тяжёлые и медленные. Бинарные форматы оптимальны для межсервисного взаимодействия, но требуют схем и генерации кода.

В высоконагруженных микросервисах чаще выбирают Protobuf или Avro. Во внешних API по-прежнему преобладают JSON и иногда XML.

## Где сериализация критична

* gRPC‑взаимодействие (Protobuf).
* Потоковая обработка (Avro в Kafka).
* Микросервисы с высокой нагрузкой.
* Кросс‑языковые системы.
* RPC‑фреймворки.

## Итог

Сериализация определяет эффективность и надёжность обмена данными между компонентами системы. Выбор формата зависит от требований: человекочитаемости, производительности, совместимости и схемности.
