# ะะฝะดะตะบัั ะฒ PostgreSQL

## ๐ ะกะพะดะตัะถะฐะฝะธะต

- [ะงัะพ ัะฐะบะพะต ะธะฝะดะตะบั](#ััะพ-ัะฐะบะพะต-ะธะฝะดะตะบั)
- [ะขะธะฟั ะธะฝะดะตะบัะพะฒ](#ัะธะฟั-ะธะฝะดะตะบัะพะฒ)
- [ะกะพะทะดะฐะฝะธะต ะธะฝะดะตะบัะพะฒ](#ัะพะทะดะฐะฝะธะต-ะธะฝะดะตะบัะพะฒ)
- [ะกะพััะฐะฒะฝัะต ะธะฝะดะตะบัั](#ัะพััะฐะฒะฝัะต-ะธะฝะดะตะบัั)
- [ะงะฐััะธัะฝัะต ะธะฝะดะตะบัั](#ัะฐััะธัะฝัะต-ะธะฝะดะตะบัั)
- [ะฃะฝะธะบะฐะปัะฝัะต ะธะฝะดะตะบัั](#ัะฝะธะบะฐะปัะฝัะต-ะธะฝะดะตะบัั)
- [ะะพะบััะฒะฐััะธะต ะธะฝะดะตะบัั](#ะฟะพะบััะฒะฐััะธะต-ะธะฝะดะตะบัั)
- [EXPLAIN โ ะฐะฝะฐะปะธะท ะทะฐะฟัะพัะพะฒ](#explain--ะฐะฝะฐะปะธะท-ะทะฐะฟัะพัะพะฒ)
- [ะะพะณะดะฐ ะธะฝะดะตะบัั ะะ ะฟะพะผะพะณะฐัั](#ะบะพะณะดะฐ-ะธะฝะดะตะบัั-ะฝะต-ะฟะพะผะพะณะฐัั)
- [ะัััะธะต ะฟัะฐะบัะธะบะธ](#ะปัััะธะต-ะฟัะฐะบัะธะบะธ)

---

## ะงัะพ ัะฐะบะพะต ะธะฝะดะตะบั

**ะะฝะดะตะบั** โ ััะพ ัะฟะตัะธะฐะปัะฝะฐั ััััะบัััะฐ ะดะฐะฝะฝัั, ะบะพัะพัะฐั ััะบะพััะตั ะฟะพะธัะบ ะทะฐะฟะธัะตะน ะฒ ัะฐะฑะปะธัะต.

### ะะฝะฐะปะพะณะธั

ะัะตะดััะฐะฒั ะบะฝะธะณั ะฝะฐ 1000 ัััะฐะฝะธั. ะงัะพะฑั ะฝะฐะนัะธ ะธะฝัะพัะผะฐัะธั ะพ "ััะฐะฝะทะฐะบัะธัั":
- **ะะตะท ะธะฝะดะตะบัะฐ** โ ะปะธััะฐัั ะฒัะต 1000 ัััะฐะฝะธั (Full Table Scan)
- **ะก ะธะฝะดะตะบัะพะผ** โ ะพัะบัััั ะพะณะปะฐะฒะปะตะฝะธะต, ะฝะฐะนัะธ "ััะฐะฝะทะฐะบัะธะธ โ ััั. 247" (Index Scan)

### ะะฐะบ ัะฐะฑะพัะฐะตั

```
ะขะฐะฑะปะธัะฐ users (1 000 000 ะทะฐะฟะธัะตะน)
โโโโโโฌโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโ
โ id โ email           โ name    โ
โโโโโโผโโโโโโโโโโโโโโโโโโผโโโโโโโโโโค
โ 1  โ a@mail.com      โ Anna    โ
โ 2  โ b@mail.com      โ Boris   โ
โ... โ ...             โ ...     โ
โโโโโโดโโโโโโโโโโโโโโโโโโดโโโโโโโโโโ

ะะฝะดะตะบั ะฝะฐ email (B-tree)
โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโ
โ email           โ row_id โ
โโโโโโโโโโโโโโโโโโโผโโโโโโโโโค
โ a@mail.com      โ 1      โ
โ b@mail.com      โ 2      โ
โ ...             โ ...    โ
โโโโโโโโโโโโโโโโโโโดโโโโโโโโโ
(ะพััะพััะธัะพะฒะฐะฝะพ ะฟะพ ะฐะปัะฐะฒะธัั)
```

ะะตะท ะธะฝะดะตะบัะฐ: `O(n)` โ ะฟะตัะตะฑะพั ะฒัะตั ะทะฐะฟะธัะตะน  
ะก ะธะฝะดะตะบัะพะผ: `O(log n)` โ ะฑะธะฝะฐัะฝัะน ะฟะพะธัะบ

---

## ะขะธะฟั ะธะฝะดะตะบัะพะฒ

### B-tree (ะฟะพ ัะผะพะปัะฐะฝะธั)

ะกะฐะผัะน ัะฝะธะฒะตััะฐะปัะฝัะน. ะะพะดัะพะดะธั ะดะปั ะพะฟะตัะฐัะพัะพะฒ ััะฐะฒะฝะตะฝะธั.

```sql
CREATE INDEX idx_users_email ON users(email);
-- ะญะบะฒะธะฒะฐะปะตะฝัะฝะพ:
CREATE INDEX idx_users_email ON users USING btree(email);
```

**ะะพะดะดะตัะถะธะฒะฐะตั ะพะฟะตัะฐัะพัั:** `<`, `<=`, `=`, `>=`, `>`, `BETWEEN`, `IN`, `IS NULL`, `LIKE 'abc%'`

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:** ะ 90% ัะปััะฐะตะฒ. ะะปั ะปัะฑัั ััะฐะฒะฝะตะฝะธะน ะธ ัะพััะธัะพะฒะพะบ.

---

### Hash

ะขะพะปัะบะพ ะดะปั ะพะฟะตัะฐัะธะน ัะฐะฒะตะฝััะฒะฐ (`=`). ะััััะตะต B-tree ะดะปั ัะพัะฝัั ัะพะฒะฟะฐะดะตะฝะธะน.

```sql
CREATE INDEX idx_users_email ON users USING hash(email);
```

**ะะพะดะดะตัะถะธะฒะฐะตั ะพะฟะตัะฐัะพัั:** ัะพะปัะบะพ `=`

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:** ะะตะดะบะพ. ะะพะณะดะฐ ะฝัะถะฝะพ ัะพะปัะบะพ ัะพัะฝะพะต ัะพะฒะฟะฐะดะตะฝะธะต ะธ ะฝะธะบะพะณะดะฐ ัะพััะธัะพะฒะบะฐ ะธะปะธ ะดะธะฐะฟะฐะทะพะฝั.

> โ๏ธ Hash-ะธะฝะดะตะบัั ะฝะต ะฟะพะดะดะตัะถะธะฒะฐัั `ORDER BY` ะธ ะดะธะฐะฟะฐะทะพะฝะฝัะต ะทะฐะฟัะพัั.

---

### GIN (Generalized Inverted Index)

ะะปั ัะพััะฐะฒะฝัั ะทะฝะฐัะตะฝะธะน: ะผะฐััะธะฒั, JSONB, ะฟะพะปะฝะพัะตะบััะพะฒัะน ะฟะพะธัะบ.

```sql
-- ะะปั JSONB
CREATE INDEX idx_data ON products USING gin(metadata);

-- ะะปั ะผะฐััะธะฒะพะฒ
CREATE INDEX idx_tags ON posts USING gin(tags);

-- ะะปั ะฟะพะปะฝะพัะตะบััะพะฒะพะณะพ ะฟะพะธัะบะฐ
CREATE INDEX idx_search ON articles USING gin(to_tsvector('russian', content));
```

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:** JSONB ะฟะพะปั, ะผะฐััะธะฒั, ะฟะพะปะฝะพัะตะบััะพะฒัะน ะฟะพะธัะบ.

---

### GiST (Generalized Search Tree)

ะะปั ะณะตะพะผะตััะธัะตัะบะธั ะดะฐะฝะฝัั, ะดะธะฐะฟะฐะทะพะฝะพะฒ, ะฟะพะปะฝะพัะตะบััะพะฒะพะณะพ ะฟะพะธัะบะฐ.

```sql
-- ะะปั ะณะตะพะดะฐะฝะฝัั (PostGIS)
CREATE INDEX idx_location ON places USING gist(coordinates);

-- ะะปั ะดะธะฐะฟะฐะทะพะฝะพะฒ
CREATE INDEX idx_period ON events USING gist(date_range);
```

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:** ะะตะพะดะฐะฝะฝัะต, ะดะธะฐะฟะฐะทะพะฝั ะดะฐั, ะฟะพะปะฝะพัะตะบััะพะฒัะน ะฟะพะธัะบ.

---

### BRIN (Block Range Index)

ะะพะผะฟะฐะบัะฝัะน ะธะฝะดะตะบั ะดะปั ะฑะพะปััะธั ัะฐะฑะปะธั ั ะตััะตััะฒะตะฝะฝะพะน ัะพััะธัะพะฒะบะพะน ะดะฐะฝะฝัั.

```sql
CREATE INDEX idx_created ON logs USING brin(created_at);
```

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:** ะะณัะพะผะฝัะต ัะฐะฑะปะธัั (ะผะธะปะปะธะพะฝั+ ะทะฐะฟะธัะตะน), ะณะดะต ะดะฐะฝะฝัะต ัะธะทะธัะตัะบะธ ัะฟะพััะดะพัะตะฝั (ะฝะฐะฟัะธะผะตั, ะปะพะณะธ ะฟะพ ะฒัะตะผะตะฝะธ).

> ๐ก BRIN ะทะฐะฝะธะผะฐะตั ะฒ ~100 ัะฐะท ะผะตะฝััะต ะผะตััะฐ, ัะตะผ B-tree, ะฝะพ ะผะตะฝะตะต ัะพัะฝัะน.

---

### ะกัะฐะฒะฝะตะฝะธะต ัะธะฟะพะฒ ะธะฝะดะตะบัะพะฒ

| ะขะธะฟ | ะะฐะทะผะตั | ะกะบะพัะพััั | ะะฟะตัะฐัะธะธ | ะัะธะผะตะฝะตะฝะธะต |
|-----|--------|----------|----------|------------|
| **B-tree** | ะกัะตะดะฝะธะน | ะัััััะน | `=`, `<`, `>`, `BETWEEN`, `LIKE 'x%'` | ะฃะฝะธะฒะตััะฐะปัะฝัะน |
| **Hash** | ะะฐะปะตะฝัะบะธะน | ะัะตะฝั ะฑัััััะน | ะขะพะปัะบะพ `=` | ะขะพัะฝะพะต ัะพะฒะฟะฐะดะตะฝะธะต |
| **GIN** | ะะพะปััะพะน | ะัััััะน ะฟะพะธัะบ | `@>`, `<@`, `&&`, `@@` | JSONB, ะผะฐััะธะฒั, FTS |
| **GiST** | ะกัะตะดะฝะธะน | ะกัะตะดะฝะธะน | `<<`, `>>`, `@>`, `&&` | ะะตะพะดะฐะฝะฝัะต, ะดะธะฐะฟะฐะทะพะฝั |
| **BRIN** | ะัะตะฝั ะผะฐะปะตะฝัะบะธะน | ะกัะตะดะฝะธะน | `=`, `<`, `>` | ะะณัะพะผะฝัะต ัะฟะพััะดะพัะตะฝะฝัะต ัะฐะฑะปะธัั |

---

## ะกะพะทะดะฐะฝะธะต ะธะฝะดะตะบัะพะฒ

### ะะฐะทะพะฒัะน ัะธะฝัะฐะบัะธั

```sql
CREATE INDEX ะธะผั_ะธะฝะดะตะบัะฐ ON ัะฐะฑะปะธัะฐ(ะบะพะปะพะฝะบะฐ);
```

### ะัะธะผะตัั

```sql
-- ะัะพััะพะน ะธะฝะดะตะบั
CREATE INDEX idx_users_email ON users(email);

-- ะก ัะบะฐะทะฐะฝะธะตะผ ัะธะฟะฐ
CREATE INDEX idx_users_email ON users USING btree(email);

-- ะกะพะทะดะฐัั, ะตัะปะธ ะฝะต ัััะตััะฒัะตั
CREATE INDEX IF NOT EXISTS idx_users_email ON users(email);

-- ะกะพะทะดะฐัั ะฒ ัะพะฝะต (ะฝะต ะฑะปะพะบะธััะตั ัะฐะฑะปะธัั)
CREATE INDEX CONCURRENTLY idx_users_email ON users(email);
```

> ๐ก **CONCURRENTLY** โ ัะพะทะดะฐัั ะธะฝะดะตะบั ะฑะตะท ะฑะปะพะบะธัะพะฒะบะธ ัะฐะฑะปะธัั. ะะตะดะปะตะฝะฝะตะต, ะฝะพ ะฝะต ะผะตัะฐะตั ะดััะณะธะผ ะทะฐะฟัะพัะฐะผ. ะะตะบะพะผะตะฝะดัะตััั ะดะปั production.

---

## ะกะพััะฐะฒะฝัะต ะธะฝะดะตะบัั

ะะฝะดะตะบั ะฝะฐ ะฝะตัะบะพะปัะบะพ ะบะพะปะพะฝะพะบ.

```sql
CREATE INDEX idx_orders_user_status ON orders(user_id, status);
```

### ะะพััะดะพะบ ะบะพะปะพะฝะพะบ ะฒะฐะถะตะฝ!

```sql
-- ะะฝะดะตะบั (user_id, status) ะฑัะดะตั ะธัะฟะพะปัะทะพะฒะฐัััั ะดะปั:
WHERE user_id = 1                      -- โ ะะฐ
WHERE user_id = 1 AND status = 'done'  -- โ ะะฐ
WHERE status = 'done'                  -- โ ะะตั!
WHERE status = 'done' AND user_id = 1  -- โ ะะฐ (ะพะฟัะธะผะธะทะฐัะพั ะฟะตัะตััะฐะฒะธั)
```

**ะัะฐะฒะธะปะพ:** ะะฝะดะตะบั ัะฐะฑะพัะฐะตั **ัะปะตะฒะฐ ะฝะฐะฟัะฐะฒะพ**. ะะพะปะพะฝะบะฐ ะดะพะปะถะฝะฐ ะฑััั ะฒ ะฝะฐัะฐะปะต ะธะฝะดะตะบัะฐ ะธะปะธ ัะปะตะดะพะฒะฐัั ะทะฐ ะดััะณะธะผะธ ะธัะฟะพะปัะทัะตะผัะผะธ ะบะพะปะพะฝะบะฐะผะธ.

### ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ะฟะพััะดะบั

1. ะกะฝะฐัะฐะปะฐ ะบะพะปะพะฝะบะธ ั **ัะฐะฒะตะฝััะฒะพะผ** (`=`)
2. ะะพัะพะผ ะบะพะปะพะฝะบะธ ั **ะดะธะฐะฟะฐะทะพะฝะฐะผะธ** (`>`, `<`, `BETWEEN`)
3. ะะพะปะพะฝะบะธ ะดะปั **ัะพััะธัะพะฒะบะธ** (`ORDER BY`) โ ะฒ ะบะพะฝัะต

```sql
-- ะะฐะฟัะพั: WHERE user_id = 1 AND created_at > '2024-01-01' ORDER BY status
-- ะะฟัะธะผะฐะปัะฝัะน ะธะฝะดะตะบั:
CREATE INDEX idx_optimal ON orders(user_id, created_at, status);
```

---

## ะงะฐััะธัะฝัะต ะธะฝะดะตะบัั

ะะฝะดะตะบั ัะพะปัะบะพ ะดะปั ัะฐััะธ ะดะฐะฝะฝัั (ั ััะปะพะฒะธะตะผ `WHERE`).

```sql
-- ะะฝะดะตะบั ัะพะปัะบะพ ะดะปั ะฐะบัะธะฒะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
CREATE INDEX idx_active_users ON users(email) WHERE status = 'active';

-- ะะฝะดะตะบั ัะพะปัะบะพ ะดะปั ะฝะตะทะฐะฒะตัััะฝะฝัั ะทะฐะบะฐะทะพะฒ
CREATE INDEX idx_pending_orders ON orders(created_at) WHERE status = 'pending';
```

### ะัะตะธะผััะตััะฒะฐ

- **ะะตะฝััะต ัะฐะทะผะตั** โ ะธะฝะดะตะบัะธััะตััั ะฝะต ะฒัั ัะฐะฑะปะธัะฐ
- **ะััััะตะต ะพะฑะฝะพะฒะปะตะฝะธะต** โ ะผะตะฝััะต ะทะฐะฟะธัะตะน ะดะปั ะฟะพะดะดะตัะถะบะธ
- **ะััััะตะต ะฟะพะธัะบ** โ ะผะตะฝััะต ะดะฐะฝะฝัั ะดะปั ัะบะฐะฝะธัะพะฒะฐะฝะธั

```sql
-- ะะฐะฟัะพั ะฑัะดะตั ะธัะฟะพะปัะทะพะฒะฐัั ัะฐััะธัะฝัะน ะธะฝะดะตะบั, ะตัะปะธ ััะปะพะฒะธะต ัะพะฒะฟะฐะดะฐะตั
SELECT * FROM users WHERE email = 'a@mail.com' AND status = 'active';
```

---

## ะฃะฝะธะบะฐะปัะฝัะต ะธะฝะดะตะบัั

ะะฐัะฐะฝัะธัััั ัะฝะธะบะฐะปัะฝะพััั ะทะฝะฐัะตะฝะธะน ะฒ ะบะพะปะพะฝะบะต.

```sql
-- ะฃะฝะธะบะฐะปัะฝัะน ะธะฝะดะตะบั
CREATE UNIQUE INDEX idx_users_email ON users(email);

-- ะฃะฝะธะบะฐะปัะฝัะน ัะพััะฐะฒะฝะพะน ะธะฝะดะตะบั
CREATE UNIQUE INDEX idx_user_role ON user_roles(user_id, role_id);

-- ะงะฐััะธัะฝัะน ัะฝะธะบะฐะปัะฝัะน ะธะฝะดะตะบั
CREATE UNIQUE INDEX idx_active_email ON users(email) WHERE deleted_at IS NULL;
```

> ๐ก `PRIMARY KEY` ะธ `UNIQUE` ะพะณัะฐะฝะธัะตะฝะธั ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัั ัะฝะธะบะฐะปัะฝัะต ะธะฝะดะตะบัั.

---

## ะะพะบััะฒะฐััะธะต ะธะฝะดะตะบัั (INCLUDE)

ะะพะฑะฐะฒะปััั ะดะพะฟะพะปะฝะธัะตะปัะฝัะต ะบะพะปะพะฝะบะธ ะฒ ะธะฝะดะตะบั ะดะปั ะธะทะฑะตะถะฐะฝะธั ะพะฑัะฐัะตะฝะธั ะบ ัะฐะฑะปะธัะต.

```sql
-- ะะฑััะฝัะน ะธะฝะดะตะบั โ ะฝัะถะฝะพ ะพะฑัะฐัะฐัััั ะบ ัะฐะฑะปะธัะต ะทะฐ name
CREATE INDEX idx_users_email ON users(email);
SELECT email, name FROM users WHERE email = 'a@mail.com';
-- Index Scan โ Heap Fetch (ะดะพะฟะพะปะฝะธัะตะปัะฝะพะต ััะตะฝะธะต)

-- ะะพะบััะฒะฐััะธะน ะธะฝะดะตะบั โ ะฒัั ะตััั ะฒ ะธะฝะดะตะบัะต
CREATE INDEX idx_users_email ON users(email) INCLUDE (name);
SELECT email, name FROM users WHERE email = 'a@mail.com';
-- Index Only Scan (ะฑััััะตะต!)
```

### ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั

ะะพะณะดะฐ ัะฐััะพ ะฒัะฑะธัะฐะตัะต ะพะดะฝะธ ะธ ัะต ะถะต ะบะพะปะพะฝะบะธ ะฒะผะตััะต ั ะธะฝะดะตะบัะธััะตะผัะผะธ.

```sql
-- ะงะฐัััะน ะทะฐะฟัะพั
SELECT id, email, name FROM users WHERE email = ?;

-- ะะฟัะธะผะฐะปัะฝัะน ะธะฝะดะตะบั
CREATE INDEX idx_users_email ON users(email) INCLUDE (id, name);
```


---

## EXPLAIN โ ะฐะฝะฐะปะธะท ะทะฐะฟัะพัะพะฒ

ะะพะบะฐะทัะฒะฐะตั, ะบะฐะบ PostgreSQL ะฒัะฟะพะปะฝัะตั ะทะฐะฟัะพั ะธ ะธัะฟะพะปัะทัะตั ะปะธ ะธะฝะดะตะบัั.

### ะะฐะทะพะฒะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต

```sql
EXPLAIN SELECT * FROM users WHERE email = 'a@mail.com';
```

```
Index Scan using idx_users_email on users  (cost=0.42..8.44 rows=1 width=64)
  Index Cond: (email = 'a@mail.com'::text)
```

### ะก ัะตะฐะปัะฝัะผ ะฒัะตะผะตะฝะตะผ ะฒัะฟะพะปะฝะตะฝะธั

```sql
EXPLAIN ANALYZE SELECT * FROM users WHERE email = 'a@mail.com';
```

```
Index Scan using idx_users_email on users  (cost=0.42..8.44 rows=1 width=64) (actual time=0.025..0.026 rows=1 loops=1)
  Index Cond: (email = 'a@mail.com'::text)
Planning Time: 0.085 ms
Execution Time: 0.042 ms
```

### ะขะธะฟั ัะบะฐะฝะธัะพะฒะฐะฝะธั

| ะขะธะฟ | ะะฟะธัะฐะฝะธะต | ะกะบะพัะพััั |
|-----|----------|----------|
| **Seq Scan** | ะะพัะปะตะดะพะฒะฐัะตะปัะฝัะน ะฟะตัะตะฑะพั ะฒัะตะน ัะฐะฑะปะธัั | ๐ด ะะตะดะปะตะฝะฝะพ |
| **Index Scan** | ะะพะธัะบ ะฟะพ ะธะฝะดะตะบัั + ััะตะฝะธะต ะดะฐะฝะฝัั ะธะท ัะฐะฑะปะธัั | ๐ข ะััััะพ |
| **Index Only Scan** | ะัะต ะดะฐะฝะฝัะต ะฑะตััััั ะธะท ะธะฝะดะตะบัะฐ | ๐ข ะัะตะฝั ะฑััััะพ |
| **Bitmap Index Scan** | ะะฝะดะตะบั ัะพะทะดะฐัั ะฑะธัะพะฒัั ะบะฐััั, ะฟะพัะพะผ ัะธัะฐะตั ัะฐะฑะปะธัั | ๐ก ะกัะตะดะฝะต |

---

## ะะพะณะดะฐ ะธะฝะดะตะบัั ะะ ะฟะพะผะพะณะฐัั

### 1. ะะฐะปะตะฝัะบะธะต ัะฐะฑะปะธัั

```sql
-- ะขะฐะฑะปะธัะฐ ั 100 ะทะฐะฟะธััะผะธ
-- Seq Scan ะผะพะถะตั ะฑััั ะฑััััะตะต, ัะตะผ Index Scan
SELECT * FROM small_table WHERE status = 'active';
```

### 2. ะัะฑะพัะบะฐ ะฑะพะปััะพะน ัะฐััะธ ัะฐะฑะปะธัั

```sql
-- ะัะปะธ status = 'active' ั 80% ะทะฐะฟะธัะตะน
-- PostgreSQL ะฒัะฑะตัะตั Seq Scan ะฒะผะตััะพ Index Scan
SELECT * FROM users WHERE status = 'active';
```

> ๐ก **ะัะฐะฒะธะปะพ:** ะะฝะดะตะบั ัััะตะบัะธะฒะตะฝ, ะตัะปะธ ะฒัะฑะธัะฐะตััั < 10-15% ะทะฐะฟะธัะตะน ัะฐะฑะปะธัั.

### 3. ะคัะฝะบัะธะธ ะฝะฐ ะธะฝะดะตะบัะธััะตะผะพะน ะบะพะปะพะฝะบะต

```sql
-- โ ะะฝะดะตะบั ะะ ะธัะฟะพะปัะทัะตััั
SELECT * FROM users WHERE LOWER(email) = 'a@mail.com';
SELECT * FROM users WHERE YEAR(created_at) = 2024;

-- โ ะะตัะตะฝะธะต: ััะฝะบัะธะพะฝะฐะปัะฝัะน ะธะฝะดะตะบั
CREATE INDEX idx_users_email_lower ON users(LOWER(email));
```

### 4. LIKE ั % ะฒ ะฝะฐัะฐะปะต

```sql
-- โ ะะฝะดะตะบั ะะ ะธัะฟะพะปัะทัะตััั
SELECT * FROM users WHERE email LIKE '%@gmail.com';

-- โ ะะฝะดะตะบั ะธัะฟะพะปัะทัะตััั
SELECT * FROM users WHERE email LIKE 'admin%';
```

### 5. OR ั ัะฐะทะฝัะผะธ ะบะพะปะพะฝะบะฐะผะธ

```sql
-- โ ะะพะถะตั ะฝะต ะธัะฟะพะปัะทะพะฒะฐัั ะธะฝะดะตะบัั ัััะตะบัะธะฒะฝะพ
SELECT * FROM users WHERE email = 'a@mail.com' OR name = 'Ivan';

-- โ ะัััะต ะธัะฟะพะปัะทะพะฒะฐัั UNION
SELECT * FROM users WHERE email = 'a@mail.com'
UNION
SELECT * FROM users WHERE name = 'Ivan';
```

### 6. ะะตัะฐะฒะตะฝััะฒะพ (!=, <>)

```sql
-- โ ะะฝะดะตะบั ะพะฑััะฝะพ ะฝะต ะฟะพะผะพะณะฐะตั
SELECT * FROM users WHERE status != 'deleted';
```

---

## ะัััะธะต ะฟัะฐะบัะธะบะธ

### โ ะกะพะทะดะฐะฒะฐะนัะต ะธะฝะดะตะบัั ะดะปั

- ะะพะปะพะฝะพะบ ะฒ `WHERE` ั ะฒััะพะบะพะน ัะตะปะตะบัะธะฒะฝะพัััั
- ะะพะปะพะฝะพะบ ะฒ `JOIN` (foreign keys)
- ะะพะปะพะฝะพะบ ะฒ `ORDER BY`
- ะะพะปะพะฝะพะบ ะฒ `GROUP BY`

### โ ะะทะฑะตะณะฐะนัะต ะปะธัะฝะธั ะธะฝะดะตะบัะพะฒ

- ะะฐะถะดัะน ะธะฝะดะตะบั ะทะฐะผะตะดะปัะตั `INSERT`, `UPDATE`, `DELETE`
- ะะฝะดะตะบัั ะทะฐะฝะธะผะฐัั ะผะตััะพ ะฝะฐ ะดะธัะบะต
- ะกะปะธัะบะพะผ ะผะฝะพะณะพ ะธะฝะดะตะบัะพะฒ โ ะพะฟัะธะผะธะทะฐัะพั ะผะพะถะตั ะฒัะฑัะฐัั ะฝะตะพะฟัะธะผะฐะปัะฝัะน

### ๐ฏ ะงะตะบ-ะปะธัั ะฟะตัะตะด ัะพะทะดะฐะฝะธะตะผ ะธะฝะดะตะบัะฐ

1. ะัะพะฒะตัะธัั `EXPLAIN ANALYZE` ะฑะตะท ะธะฝะดะตะบัะฐ
2. ะกะพะทะดะฐัั ะธะฝะดะตะบั
3. ะัะพะฒะตัะธัั `EXPLAIN ANALYZE` ั ะธะฝะดะตะบัะพะผ
4. ะฃะฑะตะดะธัััั, ััะพ ะธะฝะดะตะบั ะธัะฟะพะปัะทัะตััั
5. ะัะพะฒะตัะธัั ัะฐะทะผะตั ะธะฝะดะตะบัะฐ
6. ะะพะฝะธัะพัะธัั ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตัะตะท ะฝะตะดะตะปั

---

> ๐ก **ะะพะปะพัะพะต ะฟัะฐะฒะธะปะพ:** ะะฝะดะตะบัั โ ััะพ ะบะพะผะฟัะพะผะธัั ะผะตะถะดั ัะบะพัะพัััั ััะตะฝะธั ะธ ัะบะพัะพัััั ะทะฐะฟะธัะธ. ะกะพะทะดะฐะฒะฐะนัะต ัะพะปัะบะพ ัะต ะธะฝะดะตะบัั, ะบะพัะพััะต ัะตะฐะปัะฝะพ ะฝัะถะฝั.

